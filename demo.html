<!doctype html>
<html lang="en-US" style="height: 240vh">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta
      name="description"
      content="Demo of sig-nal. Sig-nal is a tiny web component for server-side rendering with signals." />
    <meta name="theme-color" content="#ffffff" />
    <link rel="apple-touch-icon" sizes="152x152" href="/apple-touch-icon.png" />
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png" />
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png" />
    <link rel="manifest" href="manifest.json" />
    <link rel="icon" href="favicon.ico" />
    <link rel="preload" href="./counterdemo.css" as="style" />
    <title>Demo | sig-nal</title>
    <style>
      body,
      div {
        display: flex;
        flex-direction: column;
        align-items: center;
        font-family: sans-serif;
      }

      body {
        background-repeat: no-repeat;
        background-image: radial-gradient(
          circle 300vh at 9% 80.3%,
          rgba(55, 60, 245, 1) 0%,
          rgba(234, 161, 15, 0.9) 100.2%
        );
        color: #333;
        height: 150vh;
      }

      details {
        cursor: pointer;
        padding: 1rem 3rem;
        color: #fff;
        max-width: 26rem;
      }

      .featured {
        box-shadow: 1px 2px 3px #000;
        margin: 1rem;
        width: 320px;
        height: 500px;
      }

      digital-clock {
        display: block;
        margin: 0 auto;
      }
    </style>
    <script>
      const files = ['index', 'plugins/part-ial'];
      const isProduction = location.search.includes('prod');
      for (let file of files) {
        import(`./${isProduction ? 'dist' : 'src'}/${file}.js`);
      }
    </script>
  </head>
  <body>
    <div class="featured">
      <template shadowrootmode="open">
        <link rel="stylesheet" href="./counterdemo.css" />
        <h3>Interactive island</h3>
        <p>The server supplied the initial value <b>3.</b></p>
        <div>
          <button id="dec">-</button>
          <span id="value">3</span>
          <button id="inc">+</button>
          <!-- prettier-ignore -->
          <sig-nal
            new="counter"
            type="number"
            default=".textContent#value"
            hydrate hidden>
            { value: { ".textContent": rerender },
	        dec: { "@click": ({signal}) => signal.value-- },
		inc: { "@click": ({signal}) => signal.value++ }
            }
          </sig-nal>
        </div>
      </template>
    </div>
    <digital-clock>
      <template shadowrootmode="open">
        <style>
          * {
            font-family: sans-serif;
            font-weight: 700;
            font-size: 4vw;
          }

          table {
            background: #555;
            color: #fff;
            padding: 0 5px;
            border-radius: 5px;
          }

          td {
            min-width: 1rem;
          }

          .year {
            min-width: 2.2rem;
          }

          .weekday:after {
            content: ',';
          }
          .day:after {
            content: '.';
          }
          .hour:after,
          .minute:after {
            content: ':';
            margin-right: -2px;
          }
        </style>
        <table>
          <tr>
            <td id="datetime0" class="weekday" .textContent>Freitag</td>
            <td id="datetime2" class="day" .textContent>10</td>
            <td id="datetime4" class="month" .textContent>October</td>
            <td id="datetime6" class="year" .textContent>2025</td>
            <td id="datetime8" class="hour" .textContent>22</td>
            <td id="datetime10" class="minute" .textContent>15</td>
            <td id="datetime12" .textContent>15</td>
            <td id="datetime14" .textContent>MESZ</td>
          </tr>
        </table>
        <!-- prettier-ignore -->
        <sig-nal new="datetime" for="previousElementSibling" hydrate hidden>
          {"": {"@init": ({signal}) => setInterval(() => (signal.value = Intl.DateTimeFormat('de-CH', { dateStyle: 'full', timeStyle: 'long' }).formatToParts(Date.now()).map(({value}) => value)), 1000),
                ".firstElementChild": renderWith(index(['.textContent']), false)
	       }
	  }
        </sig-nal>
      </template>
    </digital-clock>
    <div class="featured">
      <template shadowrootmode="open">
        <link rel="stylesheet" href="./counterdemo.css" />
        <h3>Interactive island</h3>
        <p>The server supplied the initial value <b>0.</b></p>
        <p>
          <span class="even">Even</span>&nbsp;and&nbsp;<span class="odd"
            >odd</span
          >&nbsp;values are distinguished.
        </p>
        <div>
          <button id="dec">-</button>
          <span id="value">0</span>
          <button id="inc">+</button>
          <!-- prettier-ignore -->
          <sig-nal
            new="counterclassmap"
            type="number"
            default=".textContent#value"
            hydrate hidden>
            { value: { ".textContent": rerender,
                       ".classMap": plugin(({signal}) => ({even: computed(() => !(signal.value & 1)),
	                                                    odd: computed(() =>   signal.value & 1)}))
		     },
	        dec: { "@click": ({signal}) => signal.value-- },
	        inc: { "@click": ({signal}) => signal.value++ }
	    }
          </sig-nal>
        </div>
      </template>
    </div>

    <details>
      <summary>Info</summary>
      <p>
        Demo (c) 2025 by Markus Walther. Witness how both counter/FAQ instances
        are independent of each other, thanks to shadowRoot scoping! In Chrome
        DevTools, enable Rendering &rarr; Paint flashing to see fine-grained DOM
        updates!
      </p>
    </details>

    <div class="more-stuff">
      <template shadowrootmode="open">
        <style>
          button {
            display: block;
            margin: 0 auto;
            box-shadow: 1px 2px 3px rgba(0, 0, 0, 0.3);
            padding: 0.5rem;
            cursor: pointer;
          }
          acc-ordion {
            display: block;
            width: 100%;
          }
          acc-ordion p {
            color: #464de4;
          }
        </style>
        <div>
          <button id="more">More</button>
          <part-ial id="partial"></part-ial>
          <!-- prettier-ignore -->
          <sig-nal new="partial" hydrate>
            {   more: {"@click": ({getById, id, signal}) => (getById(id).disabled = true) && (signal.value = './accordion.html')},
             partial: {".src": rerender}
            }
          </sig-nal>
        </div>
      </template>
    </div>
  </body>
</html>
